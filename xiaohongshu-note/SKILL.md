---
name: xiaohongshu-note
description: 生成小红书风格的项目进度笔记。当用户要求生成进度笔记、小红书笔记、项目汇报笔记、或使用 /xiaohongshu-note 时使用。
---

# 小红书项目进度笔记生成器

分析当前项目状态，生成两个版本的进度笔记，输出到 `docs/notes/` 目录。

## 使用场景

当用户需要以下操作时使用：
- 生成项目进度汇报笔记
- 写小红书风格的开发日记
- 输出阶段性进展总结

## 执行流程

### 1. 收集项目信息

依次执行以下操作，收集项目全貌：

- 读取 `CLAUDE.md` 或 `README.md` 获取项目名称、技术栈、项目描述
- 运行 `git log --oneline -20` 获取最近提交历史
- 运行 `git diff --stat HEAD~5..HEAD 2>/dev/null` 获取近期变更概况（如失败则跳过）
- 使用 Glob 扫描项目目录结构，识别主要模块
- 读取 `package.json`、`pom.xml`、`go.mod` 等获取依赖和版本信息
- 如存在 `docs/notes/` 下的历史笔记，读取最近一篇作为对比参考

### 2. 分析项目状态

根据收集的信息判断：

- **已完成的工作**：已存在的代码文件、已实现的功能模块、已写好的配置
- **进行中的工作**：最近提交涉及的模块、TODO 注释、未完成的配置项
- **待开发的工作**：CLAUDE.md 中提到但代码中尚未实现的功能、空目录、占位文件
- **整体进度百分比**：根据已完成 vs 总计划进行估算

### 3. 确定笔记期数

- 扫描 `docs/notes/` 目录下已有的 `*-progress.md` 文件
- 计算当前是第几期（已有进度文件数 + 1）
- 如果是第一篇，标题用「项目启动」；后续用「进度更新」

### 4. 生成两个版本

同时生成两个文件：

**文件 1：Markdown 完整版**（`{YYYY-MM-DD}-progress.md`）
- 完整的 Markdown 格式，含表格、代码块、checkbox
- 用于项目内部归档和版本追踪

**文件 2：小红书发布版**（`{YYYY-MM-DD}-xiaohongshu.md`）
- 纯文本格式，可直接复制粘贴到小红书
- 分为「标题」「正文」「标签」三个区块，方便分别复制
- 转换规则见「发布版转换规则」

### 5. 输出文件

- 目录：`docs/notes/`（如不存在则创建）
- 如果同一天已有同名文件，追加序号：`-2`、`-3`

## Markdown 完整版格式

```markdown
# {emoji} {吸引人的标题}

## {项目名} 开发日记 第{N}期

{一段轻松的开场白，概括本期重点，2-3句话}

---

### {emoji} {模块1标题}

{该模块的进展描述，口语化但专业}

- {具体完成项1}
- {具体完成项2}

{如有亮点设计，用简洁的方式介绍}

---

### {emoji} {模块2标题}

{同上格式}

---

### {emoji} 技术栈一览

| 层 | 技术 | 版本 |
|---|---|---|
| {层1} | {技术1} | {版本1} |
| {层2} | {技术2} | {版本2} |

---

### {emoji} 待开发清单

**P0 - {类别名}**
- [ ] {待办1}
- [ ] {待办2}

**P1 - {类别名}**
- [ ] {待办3}
- [ ] {待办4}

---

### {emoji} 整体进度

\```
{阶段1名}  {进度条 20字符宽} {百分比}%
{阶段2名}  {进度条 20字符宽} {百分比}%
{阶段3名}  {进度条 20字符宽} {百分比}%
─────────────────────────────────
总体进度   {进度条 20字符宽} {百分比}%
\```

{一句鼓励性的结尾}

---

`#标签1` `#标签2` `#标签3` `#标签4` `#开发日记`
```

## 小红书发布版格式

```markdown
# 小红书发布版 - {YYYY-MM-DD}

## 标题

{emoji} {标题文字}

## 正文

{开场白}

{emoji} {模块1标题}

{模块1内容，纯文本}
· {要点1}
· {要点2}

{emoji} {模块2标题}

{模块2内容}

{emoji} 整体进度

{阶段1名} {进度条} {百分比}%
{阶段2名} {进度条} {百分比}%
总体进度  {进度条} {百分比}%

{结尾语}

## 标签

#标签1 #标签2 #标签3 #标签4 #开发日记
```

## 发布版转换规则

Markdown 完整版 → 小红书发布版的转换：

| Markdown 元素 | 发布版处理 |
|---|---|
| `### 标题` | 去掉 `###`，保留 emoji 和文字 |
| `**加粗**` | 去掉 `**`，保留文字 |
| `- 列表项` | 替换为 `· 列表项` |
| `- [ ] 待办` | 省略（发布版不含待办清单） |
| 表格 | 转为 `· 名称（说明）` 列表格式 |
| 代码块 ` ``` ` | 去掉代码块标记，内容保留为纯文本 |
| `---` 分割线 | 去掉（用空行分段代替） |
| `` `#标签` `` | 去掉反引号，保留 `#标签` |
| 技术栈表格 | 省略或精简为一句话概述 |

## 风格规范

### 标题
- 必须包含 emoji
- 吸引人、有节奏感
- 示例：「AI学生分析系统开发日记 Day 1」「从0到1搭建数据平台」

### 正文
- 口语化但专业，像跟朋友聊技术
- 每个段落用 emoji 小标题分隔
- 避免过于正式的书面语

### 进度条
- 使用 `█`（已完成）和 `░`（未完成）
- 固定 20 字符宽度
- 每 `█` 代表 5%

### 标签
- 5-8 个标签
- Markdown 版用反引号包裹：`` `#标签名` ``
- 发布版不加反引号：`#标签名`
- 必须包含：`#开发日记`
- 根据项目内容添加技术栈标签和领域标签

## 约束条件

- Markdown 版控制在 80-150 行
- 发布版控制在 60-100 行（小红书正文上限 1000 字）
- 不编造不存在的功能或进度，严格基于代码实际状态
- 进度百分比必须有依据，不凭感觉给数字
- 不暴露敏感信息（密码、密钥、内部 IP）
- 中文撰写，技术术语保留英文

## 决策规则

- 如果是全新项目（无 git 历史）→ 聚焦架构设计和技术选型
- 如果有丰富的 git 历史 → 聚焦最近的变更和里程碑
- 如果项目有设计文档 → 引用设计文档中的计划作为总量基准
- 如果用户指定了主题或重点 → 围绕该主题展开，其他内容简略带过
- 如果同一天已生成过笔记 → 文件名追加序号，内容聚焦增量变化
